const translations = {
  en: {
    home: "Home",
    players: "Players",
    serverInfo: "Server Info",
    secreta: "ERROR 404",
    secreta2: "Frequently Asked Questions",
    headerTitle: "ShellChain - 404",
    timeline: {
      "2022": {
        title: "Error 404",
        description: "Start of the server, the birth of the great idea for Minecraft servers."
      },
      "2022-2022": {
        title: "Project Zone",
        description: "A more serious server that was better organized and developed."
      },
      "2022-2023": {
        title: "Infinity Mine",
        description: "The server developed some form of storyline, and new players joined."
      },
      "2023-2024": {
        title: "CopperCraft",
        description: "The administrator team changed, and a new approach to development was adopted. It could be considered a transition period."
      },
      "2024": {
        title: "MineShard",
        description: "The administrator team was reorganized, the server looked more professional, and the first advertisements were launched."
      },
      "2024-2025": {
        title: "ShellChain",
        description: "Advertising became professional, online, and server quality improved."
      }
    },
    faq: {
      question1: {
        question: "How to connect to the server?",
        answer: "You must be a player of the project. If you are already a player, connect to the server using the IP 'server not found'."
      },
      question2: {
        question: "Can I play without a license?",
        answer: "No, you cannot. To play on our server, you need to have a license."
      },
      question3: {
        question: "How to become a ShellChain player?",
        answer: "You just need to submit an <a target='_blank' href='https://forms.gle/5aMuzsDUfx4pCBdD9'>application!</a>"
      },
      question4: {
        question: "Can I play on my phone?",
        answer: "The server cannot be launched on the Bedrock version!"
      },
      question5: {
        question: "What is the minimum age to play on the server?",
        answer: "You can only play from 14 years old or older."
      },
      question6: {
        question: "How to join our community?",
        answer: "Just click on the <a target='_blank' href='https://discord.com/invite/EPgTFRf7Zn'>link</a> and join our <a target='_blank' href='https://discord.com/invite/EPgTFRf7Zn'>Discord server</a>."
      }
    },
    footer: {
      attribution: "Thanks to <a target='_blank' href='https://fontawesome.com'>FontAwesome</a> for providing the font,",
      license: "distributed under the <a target='_blank' href='https://creativecommons.org/licenses/by/4.0/'>CC BY 4.0</a> license.",
      rightsReserved: "ShellChain © 2025 All rights reserved.",
      creator: "Website created by <a target='_blank' href='https://cat-bios.github.io'>ArisNow0</a>"
    }
  },
  ru: {
    home: "Главная",
    players: "Игроки",
    serverInfo: "О сервере",
    secreta: "Ошибка 404",
    secreta2: "Часто задаваемые вопросы",
    headerTitle: "ShellChain - Главная",
    timeline: {
      "2022": {
        title: "Error 404",
        description: "Начало сервера, зарождение великой идеи по Minecraft-серверам."
      },
      "2022-2022": {
        title: "Project Zone",
        description: "Более серьёзный сервер, который был лучше организован и разработан."
      },
      "2022-2023": {
        title: "Infinity Mine",
        description: "На сервере появилось некое подобие сюжета и новые игроки."
      },
      "2023-2024": {
        title: "CopperCraft",
        description: "Состав администраторов поменялся, а также изменился взгляд на разработку. В какой-то мере это было межсезонье."
      },
      "2024": {
        title: "MineShard",
        description: "Состав администраторов был реорганизован, сервер выглядел солиднее, и появилась первая реклама."
      },
      "2024-2025": {
        title: "ShellChain",
        description: "Реклама стала профессиональной, онлайн и качество сервера улучшились."
      }
    },
    faq: {
      question1: {
        question: "Как подключиться к серверу?",
        answer: "Вы должны быть игроком проекта. Если вы уже игрок, зайдите на сервер по IP 'сервер не найден'."
      },
      question2: {
        question: "Можно играть без лицензии?",
        answer: "Нет, нельзя. Для игры на нашем сервере нужно иметь лицензию."
      },
      question3: {
        question: "Как стать игроком ShellChain?",
        answer: "Вам нужно всего лишь подать <a target='_blank' href='https://forms.gle/5aMuzsDUfx4pCBdD9'>заявку!</a>"
      },
      question4: {
        question: "Можно играть на телефоне?",
        answer: "Сервер не может быть запущен на версии Bedrock!"
      },
      question5: {
        question: "Со скольки можно играть на сервере?",
        answer: "Можно играть только с 14 лет или старше."
      },
      question6: {
        question: "Как попасть в наше комьюнити?",
        answer: "Просто перейдите по <a target='_blank' href='https://discord.com/invite/EPgTFRf7Zn'>ссылке</a> и присоединяйтесь к нашему <a target='_blank' href='https://discord.com/invite/EPgTFRf7Zn'>Discord серверу</a>."
      }
    },
    footer: {
      attribution: "Выражаем благодарность <a target='_blank' href='https://fontawesome.com'>FontAwesome</a> за предоставление шрифта,",
      license: "распространяемого под лицензией <a target='_blank' href='https://creativecommons.org/licenses/by/4.0/'>CC BY 4.0</a>.",
      rightsReserved: "ShellChain © 2025 Все права защищены.",
      creator: "Сайт создан <a target='_blank' href='https://cat-bios.github.io'>ArisNow0</a>"
    }
  },
  ua: {
    home: "Головна",
    players: "Гравці",
    serverInfo: "Про сервер",
    secreta: "Помилка 404",
    secreta2: "Часті питання",
    headerTitle: "ShellChain - Головна",
    timeline: {
      "2022": {
        title: "Error 404",
        description: "Початок сервера, зародження великої ідеї для Minecraft-серверів."
      },
      "2022-2022": {
        title: "Project Zone",
        description: "Більш серйозний сервер, який був краще організований та розроблений."
      },
      "2022-2023": {
        title: "Infinity Mine",
        description: "На сервері з'явився деякий сюжет і нові гравці."
      },
      "2023-2024": {
        title: "CopperCraft",
        description: "Склад адміністраторів змінився, а також погляд на розробку. Це було певною мірою перехідним періодом."
      },
      "2024": {
        title: "MineShard",
        description: "Склад адміністраторів був реорганізований, сервер став більш професійним, з'явилася перша реклама."
      },
      "2024-2025": {
        title: "ShellChain",
        description: "Реклама стала професійною, онлайн і якість сервера покращились."
      }
    },
    faq: {
      question1: {
        question: "Як підключитися до сервера?",
        answer: "Ви повинні бути гравцем проекту. Якщо ви вже гравець, підключіться до сервера через IP 'сервер не знайдений'."
      },
      question2: {
        question: "Чи можна грати без ліцензії?",
        answer: "Ні, не можна. Для гри на нашому сервері потрібно мати ліцензію."
      },
      question3: {
        question: "Як стати гравцем ShellChain?",
        answer: "Вам потрібно всього лише подати <a target='_blank' href='https://forms.gle/5aMuzsDUfx4pCBdD9'>заявку!</a>"
      },
      question4: {
        question: "Чи можна грати на телефоні?",
        answer: "Сервер не може бути запущений на версії Bedrock!"
      },
      question5: {
        question: "З якого віку можна грати на сервері?",
        answer: "Можна грати тільки з 14 років або старше."
      },
      question6: {
        question: "Як потрапити до нас у ком'юніті?",
        answer: "Просто перейдіть за <a target='_blank' href='https://discord.com/invite/EPgTFRf7Zn'>посиланням</a> і приєднайтесь до нашого <a target='_blank' href='https://discord.com/invite/EPgTFRf7Zn'>Discord серверу</a>."
      }
    },
    footer: {
      attribution: "Висловлюємо подяку <a target='_blank' href='https://fontawesome.com'>FontAwesome</a> за наданий шрифт,",
      license: "який поширюється за ліцензією <a target='_blank' href='https://creativecommons.org/licenses/by/4.0/'>CC BY 4.0</a>.",
      rightsReserved: "ShellChain © 2025 Усі права захищено.",
      creator: "Сайт створений <a target='_blank' href='https://cat-bios.github.io'>ArisNow0</a>"
    }
  }
};

function changeLanguage(language) {
  // Изменяем текст элементов в зависимости от выбранного языка
  const homeLink = document.querySelector('.navbar .links a:nth-child(1)');
  const playersLink = document.querySelector('.navbar .links a:nth-child(2)');
  const serverInfoLink = document.querySelector('.navbar .links a:nth-child(3)');
  const secretLink = document.querySelector('.navbar .links a:nth-child(4)');
  const spanElement = homeLink.querySelector('span');  // Находим span внутри ссылки
  const faqh1 = document.querySelector('.faq h2:nth-child(1)');

  const footerAttribution = document.querySelector('.footer p:nth-child(3)');
  const footerLicense = document.querySelector('.footer p:nth-child(4)');
  const footerRightsReserved = document.querySelector('.footer p:nth-child(6)');
  const footerCreator = document.querySelector('.footer .creator');

  if (footerAttribution) {
    footerAttribution.innerHTML = translations[language].footer.attribution;
  }

  if (footerLicense) {
    footerLicense.innerHTML = translations[language].footer.license;
  }

  if (footerRightsReserved) {
    footerRightsReserved.textContent = translations[language].footer.rightsReserved;
  }

  if (footerCreator) {
    footerCreator.innerHTML = translations[language].footer.creator;
  }

  if (spanElement) {
    spanElement.textContent = translations[language].home; // Меняем только текст
  } else {
    console.error("Элемент <span> не найден в homeLink");
  }

  // Функция обновления текста ссылок
  function updateLinkText(link, translationKey) {
    const span = link.querySelector('span');
    if (span) {
      span.textContent = translations[language][translationKey];
    }
  }

  updateLinkText(playersLink, 'players');
  updateLinkText(serverInfoLink, 'serverInfo');
  updateLinkText(secretLink, 'secreta');

  if (faqh1) {
    faqh1.textContent = translations[language].secreta2; // Обновляем заголовок FAQ
  }

  document.title = translations[language].headerTitle;

  // Обновляем текст для временной шкалы
  const timelineItems = document.querySelectorAll('.tl-item');
  timelineItems.forEach((item) => {
    const itemId = item.getAttribute('id'); // Получаем id элемента, например, "2022"

    // Проверяем, если у нас есть перевод для данного id
    if (translations[language].timeline[itemId]) {
      const content = translations[language].timeline[itemId];
      const contentTitle = item.querySelector('.tl-content h1');
      const contentText = item.querySelector('.tl-content p');
      
      contentTitle.textContent = content.title; // Обновляем заголовок
      contentText.textContent = content.description; // Обновляем описание
    }
  });

  // Обновляем FAQ
  const faqItems = document.querySelectorAll('.faq-item');
  faqItems.forEach((item, index) => {
    const questionKey = `question${index + 1}`;
    if (translations[language].faq[questionKey]) {
      const question = translations[language].faq[questionKey].question;
      const answer = translations[language].faq[questionKey].answer;
      item.querySelector('p strong').textContent = question;
      item.querySelector('.answer p').innerHTML = answer; // Используем innerHTML для обработки ссылок
    }
  });

  // Изменяем флаг
  setCurrentFlag(language);
}




    // Функция для изменения текущего флага
function setCurrentFlag(language) {
  const currentFlag = document.getElementById("current-flag");
  const currentFlag2 = document.getElementById("current-flag2");
  let flagSrc = "";

  // Устанавливаем флаг в зависимости от языка
  switch(language) {
    case 'ru':
      flagSrc = "https://upload.wikimedia.org/wikipedia/en/thumb/f/f3/Flag_of_Russia.svg/1200px-Flag_of_Russia.svg.png";
      break;
    case 'ua':
      flagSrc = "https://upload.wikimedia.org/wikipedia/commons/4/49/Flag_of_Ukraine.svg";
      break;
    case 'en':
    default:
      flagSrc = "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Flag_of_the_United_Kingdom_%281-2%29.svg/1200px-Flag_of_the_United_Kingdom_%281-2%29.svg.png";
      break;
  }

  // Изменяем изображение флага
  currentFlag.innerHTML = `<img src="${flagSrc}" alt="Current Language" />`;
  currentFlag2.innerHTML = `<img src="${flagSrc}" alt="Current Language" />`;
}
    
    // Обработчик кликов по флагам для переключения языка
    const flags = document.querySelectorAll('.flagd');
    flags.forEach(flag => {
      flag.addEventListener('click', (event) => {
        const lang = event.currentTarget.getAttribute('data-lang');
        changeLanguage(lang); // Меняем язык
        localStorage.setItem('language', lang); // Сохраняем язык в localStorage
      });
    });
    
    // Получаем сохраненный язык из localStorage или используем язык системы
    const savedLang = localStorage.getItem('language') || navigator.language.split('-')[0]; // Получаем язык из localStorage или по умолчанию язык системы
    changeLanguage(savedLang);